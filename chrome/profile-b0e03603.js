async function getLocal(e){return new Promise(((t,a)=>{chrome.storage.local.get(e,(e=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t(e);}));}))}async function setLocal(e){return new Promise(((t,a)=>{chrome.storage.local.set(e,(()=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t();}));}))}async function removeLocal(e){return new Promise(((t,a)=>{chrome.storage.local.remove(e,(()=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t();}));}))}async function getSync(e){return new Promise(((t,a)=>{chrome.storage.sync.get(e,(e=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t(e);}));}))}async function setSync(e){return new Promise(((t,a)=>{chrome.storage.sync.set(e,(()=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t();}));}))}async function removeSync(e){return new Promise(((t,a)=>{chrome.storage.sync.remove(e,(()=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t();}));}))}function addStorageChangeListener(e){return chrome.storage.onChanged.addListener(((t,a)=>{if("local"===a)return e(t)}))}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function listCacheClear$1(){this.__data__=[],this.size=0;}var _listCacheClear=listCacheClear$1;function eq$3(e,t){return e===t||e!=e&&t!=t}var eq_1=eq$3,eq$2=eq_1;function assocIndexOf$4(e,t){for(var a=e.length;a--;)if(eq$2(e[a][0],t))return a;return -1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(e){var t=this.__data__,a=assocIndexOf$3(t,e);return !(a<0)&&(a==t.length-1?t.pop():splice.call(t,a,1),--this.size,!0)}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(e){var t=this.__data__,a=assocIndexOf$2(t,e);return a<0?void 0:t[a][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(e){return assocIndexOf$1(this.__data__,e)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(e,t){var a=this.__data__,r=assocIndexOf(a,e);return r<0?(++this.size,a.push([e,t])):a[r][1]=t,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1]);}}ListCache$4.prototype.clear=listCacheClear,ListCache$4.prototype.delete=listCacheDelete,ListCache$4.prototype.get=listCacheGet,ListCache$4.prototype.has=listCacheHas,ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0;}var _stackClear=stackClear$1;function stackDelete$1(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}var _stackDelete=stackDelete$1;function stackGet$1(e){return this.__data__.get(e)}var _stackGet=stackGet$1;function stackHas$1(e){return this.__data__.has(e)}var _stackHas=stackHas$1,freeGlobal$1="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$6=root$8.Symbol,_Symbol=Symbol$6,Symbol$5=_Symbol,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$5?Symbol$5.toStringTag:void 0;function getRawTag$1(e){var t=hasOwnProperty$c.call(e,symToStringTag$1),a=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var r=!0;}catch(e){}var n=nativeObjectToString$1.call(e);return r&&(t?e[symToStringTag$1]=a:delete e[symToStringTag$1]),n}var _getRawTag=getRawTag$1,objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$1,Symbol$4=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$4?Symbol$4.toStringTag:void 0;function baseGetTag$6(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}var _baseGetTag=baseGetTag$6;function isObject$7(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject$7,baseGetTag$5=_baseGetTag,isObject$6=isObject_1,asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(e){if(!isObject$6(e))return !1;var t=baseGetTag$5(e);return t==funcTag$2||t==genTag$1||t==asyncTag||t==proxyTag}var isFunction_1=isFunction$2,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""),uid?"Symbol(src)_1."+uid:""),uid;function isMasked$1(e){return !!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(e){if(null!=e){try{return funcToString$1.call(e)}catch(e){}try{return e+""}catch(e){}}return ""}var _toSource=toSource$2,isFunction$1=isFunction_1,isMasked=_isMasked,isObject$5=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$d=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$b=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$b).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(e){return !(!isObject$5(e)||isMasked(e))&&(isFunction$1(e)?reIsNative:reIsHostCtor).test(toSource$1(e))}var _baseIsNative=baseIsNative$1;function getValue$1(e,t){return null==e?void 0:e[t]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(e,t){var a=getValue(e,t);return baseIsNative(a)?a:void 0}var _getNative=getNative$7,getNative$6=_getNative,root$6=_root,Map$4=getNative$6(root$6,"Map"),_Map=Map$4,getNative$5=_getNative,nativeCreate$4=getNative$5(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0;}var _hashClear=hashClear$1;function hashDelete$1(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty;function hashGet$1(e){var t=this.__data__;if(nativeCreate$2){var a=t[e];return a===HASH_UNDEFINED$2?void 0:a}return hasOwnProperty$a.call(t,e)?t[e]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashHas$1(e){var t=this.__data__;return nativeCreate$1?void 0!==t[e]:hasOwnProperty$9.call(t,e)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1]);}}Hash$1.prototype.clear=hashClear,Hash$1.prototype.delete=hashDelete,Hash$1.prototype.get=hashGet,Hash$1.prototype.has=hashHas,Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash};}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(e){var t=typeof e;return "string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(e,t){var a=e.__data__;return isKeyable(t)?a["string"==typeof t?"string":"hash"]:a.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(e){var t=getMapData$3(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(e){return getMapData$2(this,e).get(e)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(e){return getMapData$1(this,e).has(e)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(e,t){var a=getMapData(this,e),r=a.size;return a.set(e,t),this.size+=a.size==r?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1]);}}MapCache$3.prototype.clear=mapCacheClear,MapCache$3.prototype.delete=mapCacheDelete,MapCache$3.prototype.get=mapCacheGet,MapCache$3.prototype.has=mapCacheHas,MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,ListCache$1=_ListCache,Map$2=_Map,MapCache$2=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(e,t){var a=this.__data__;if(a instanceof ListCache$1){var r=a.__data__;if(!Map$2||r.length<LARGE_ARRAY_SIZE-1)return r.push([e,t]),this.size=++a.size,this;a=this.__data__=new MapCache$2(r);}return a.set(e,t),this.size=a.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(e){var t=this.__data__=new ListCache(e);this.size=t.size;}Stack$2.prototype.clear=stackClear,Stack$2.prototype.delete=stackDelete,Stack$2.prototype.get=stackGet,Stack$2.prototype.has=stackHas,Stack$2.prototype.set=stackSet;var _Stack=Stack$2,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(e){return this.__data__.set(e,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas$1,MapCache$1=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new MapCache$1;++t<a;)this.add(e[t]);}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd,SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(e,t){for(var a=-1,r=null==e?0:e.length;++a<r;)if(t(e[a],a,e))return !0;return !1}var _arraySome=arraySome$1;function cacheHas$1(e,t){return e.has(t)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(e,t,a,r,n,o){var s=a&COMPARE_PARTIAL_FLAG$3,i=e.length,c=t.length;if(i!=c&&!(s&&c>i))return !1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var f=-1,g=!0,p=a&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(o.set(e,t),o.set(t,e);++f<i;){var d=e[f],_=t[f];if(r)var b=s?r(_,d,f,t,e,o):r(d,_,f,e,t,o);if(void 0!==b){if(b)continue;g=!1;break}if(p){if(!arraySome(t,(function(e,t){if(!cacheHas(p,t)&&(d===e||n(d,e,a,r,o)))return p.push(t)}))){g=!1;break}}else if(d!==_&&!n(d,_,a,r,o)){g=!1;break}}return o.delete(e),o.delete(t),g}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(e){var t=-1,a=Array(e.size);return e.forEach((function(e,r){a[++t]=[r,e];})),a}var _mapToArray=mapToArray$1;function setToArray$1(e){var t=-1,a=Array(e.size);return e.forEach((function(e){a[++t]=e;})),a}var _setToArray=setToArray$1,Symbol$3=_Symbol,Uint8Array$1=_Uint8Array,eq$1=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",mapTag$6="[object Map]",numberTag$3="[object Number]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$4="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",symbolProto$2=Symbol$3?Symbol$3.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function equalByTag$1(e,t,a,r,n,o,s){switch(a){case dataViewTag$4:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return !1;e=e.buffer,t=t.buffer;case arrayBufferTag$3:return !(e.byteLength!=t.byteLength||!o(new Uint8Array$1(e),new Uint8Array$1(t)));case boolTag$3:case dateTag$3:case numberTag$3:return eq$1(+e,+t);case errorTag$2:return e.name==t.name&&e.message==t.message;case regexpTag$3:case stringTag$4:return e==t+"";case mapTag$6:var i=mapToArray;case setTag$6:var c=r&COMPARE_PARTIAL_FLAG$2;if(i||(i=setToArray),e.size!=t.size&&!c)return !1;var l=s.get(e);if(l)return l==t;r|=COMPARE_UNORDERED_FLAG,s.set(e,t);var u=equalArrays$1(i(e),i(t),r,n,o,s);return s.delete(e),u;case symbolTag$3:if(symbolValueOf$1)return symbolValueOf$1.call(e)==symbolValueOf$1.call(t)}return !1}var _equalByTag=equalByTag$1;function arrayPush$2(e,t){for(var a=-1,r=t.length,n=e.length;++a<r;)e[n+a]=t[a];return e}var _arrayPush=arrayPush$2,isArray$7=Array.isArray,isArray_1=isArray$7,arrayPush$1=_arrayPush,isArray$6=isArray_1;function baseGetAllKeys$2(e,t,a){var r=t(e);return isArray$6(e)?r:arrayPush$1(r,a(e))}var _baseGetAllKeys=baseGetAllKeys$2;function arrayFilter$1(e,t){for(var a=-1,r=null==e?0:e.length,n=0,o=[];++a<r;){var s=e[a];t(s,a,e)&&(o[n++]=s);}return o}var _arrayFilter=arrayFilter$1;function stubArray$2(){return []}var stubArray_1=stubArray$2,arrayFilter=_arrayFilter,stubArray$1=stubArray_1,objectProto$a=Object.prototype,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols$3=nativeGetSymbols$1?function(e){return null==e?[]:(e=Object(e),arrayFilter(nativeGetSymbols$1(e),(function(t){return propertyIsEnumerable$1.call(e,t)})))}:stubArray$1,_getSymbols=getSymbols$3;function baseTimes$1(e,t){for(var a=-1,r=Array(e);++a<e;)r[a]=t(a);return r}var _baseTimes=baseTimes$1;function isObjectLike$8(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike$8,baseGetTag$4=_baseGetTag,isObjectLike$7=isObjectLike_1,argsTag$3="[object Arguments]";function baseIsArguments$1(e){return isObjectLike$7(e)&&baseGetTag$4(e)==argsTag$3}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$6=isObjectLike_1,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty,propertyIsEnumerable=objectProto$9.propertyIsEnumerable,isArguments$2=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike$6(e)&&hasOwnProperty$8.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments$2,isBuffer$4={exports:{}};function stubFalse(){return !1}var stubFalse_1=stubFalse;!function(e,t){var a=_root,r=stubFalse_1,n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,s=o&&o.exports===n?a.Buffer:void 0,i=(s?s.isBuffer:void 0)||r;e.exports=i;}(isBuffer$4,isBuffer$4.exports);var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(e,t){var a=typeof e;return !!(t=null==t?MAX_SAFE_INTEGER$1:t)&&("number"==a||"symbol"!=a&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var _isIndex=isIndex$1,MAX_SAFE_INTEGER=9007199254740991;function isLength$2(e){return "number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}var isLength_1=isLength$2,baseGetTag$3=_baseGetTag,isLength$1=isLength_1,isObjectLike$5=isObjectLike_1,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$2="[object Number]",objectTag$3="[object Object]",regexpTag$2="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray$1(e){return isObjectLike$5(e)&&isLength$1(e.length)&&!!typedArrayTags[baseGetTag$3(e)]}typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0,typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$3(e){return function(t){return e(t)}}var _baseUnary=baseUnary$3,_nodeUtil={exports:{}};!function(e,t){var a=_freeGlobal,r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&a.process,s=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=s;}(_nodeUtil,_nodeUtil.exports);var baseIsTypedArray=_baseIsTypedArray,baseUnary$2=_baseUnary,nodeUtil$2=_nodeUtil.exports,nodeIsTypedArray=nodeUtil$2&&nodeUtil$2.isTypedArray,isTypedArray$3=nodeIsTypedArray?baseUnary$2(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$3,baseTimes=_baseTimes,isArguments$1=isArguments_1,isArray$5=isArray_1,isBuffer$3=isBuffer$4.exports,isIndex=_isIndex,isTypedArray$2=isTypedArray_1,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function arrayLikeKeys$2(e,t){var a=isArray$5(e),r=!a&&isArguments$1(e),n=!a&&!r&&isBuffer$3(e),o=!a&&!r&&!n&&isTypedArray$2(e),s=a||r||n||o,i=s?baseTimes(e.length,String):[],c=i.length;for(var l in e)!t&&!hasOwnProperty$7.call(e,l)||s&&("length"==l||n&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||isIndex(l,c))||i.push(l);return i}var _arrayLikeKeys=arrayLikeKeys$2,objectProto$7=Object.prototype;function isPrototype$4(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$7)}var _isPrototype=isPrototype$4;function overArg$2(e,t){return function(a){return e(t(a))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype$3=_isPrototype,nativeKeys=_nativeKeys,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function baseKeys$2(e){if(!isPrototype$3(e))return nativeKeys(e);var t=[];for(var a in Object(e))hasOwnProperty$6.call(e,a)&&"constructor"!=a&&t.push(a);return t}var _baseKeys=baseKeys$2,isFunction=isFunction_1,isLength=isLength_1;function isArrayLike$3(e){return null!=e&&isLength(e.length)&&!isFunction(e)}var isArrayLike_1=isArrayLike$3,arrayLikeKeys$1=_arrayLikeKeys,baseKeys$1=_baseKeys,isArrayLike$2=isArrayLike_1;function keys$3(e){return isArrayLike$2(e)?arrayLikeKeys$1(e):baseKeys$1(e)}var keys_1=keys$3,baseGetAllKeys$1=_baseGetAllKeys,getSymbols$2=_getSymbols,keys$2=keys_1;function getAllKeys$2(e){return baseGetAllKeys$1(e,keys$2,getSymbols$2)}var _getAllKeys=getAllKeys$2,getAllKeys$1=_getAllKeys,COMPARE_PARTIAL_FLAG$1=1,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function equalObjects$1(e,t,a,r,n,o){var s=a&COMPARE_PARTIAL_FLAG$1,i=getAllKeys$1(e),c=i.length;if(c!=getAllKeys$1(t).length&&!s)return !1;for(var l=c;l--;){var u=i[l];if(!(s?u in t:hasOwnProperty$5.call(t,u)))return !1}var f=o.get(e),g=o.get(t);if(f&&g)return f==t&&g==e;var p=!0;o.set(e,t),o.set(t,e);for(var d=s;++l<c;){var _=e[u=i[l]],b=t[u];if(r)var y=s?r(b,_,u,t,e,o):r(_,b,u,e,t,o);if(!(void 0===y?_===b||n(_,b,a,r,o):y)){p=!1;break}d||(d="constructor"==u);}if(p&&!d){var $=e.constructor,h=t.constructor;$==h||!("constructor"in e)||!("constructor"in t)||"function"==typeof $&&$ instanceof $&&"function"==typeof h&&h instanceof h||(p=!1);}return o.delete(e),o.delete(t),p}var _equalObjects=equalObjects$1,getNative$4=_getNative,root$4=_root,DataView$1=getNative$4(root$4,"DataView"),_DataView=DataView$1,getNative$3=_getNative,root$3=_root,Promise$2=getNative$3(root$3,"Promise"),_Promise=Promise$2,getNative$2=_getNative,root$2=_root,Set$2=getNative$2(root$2,"Set"),_Set=Set$2,getNative$1=_getNative,root$1=_root,WeakMap$1=getNative$1(root$1,"WeakMap"),_WeakMap=WeakMap$1,DataView=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap=_WeakMap,baseGetTag$2=_baseGetTag,toSource=_toSource,mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap),getTag$5=baseGetTag$2;(DataView&&getTag$5(new DataView(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag$5(new Map$1)!=mapTag$4||Promise$1&&getTag$5(Promise$1.resolve())!=promiseTag||Set$1&&getTag$5(new Set$1)!=setTag$4||WeakMap&&getTag$5(new WeakMap)!=weakMapTag$1)&&(getTag$5=function(e){var t=baseGetTag$2(e),a=t==objectTag$2?e.constructor:void 0,r=a?toSource(a):"";if(r)switch(r){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag$5,Stack$1=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag$4=_getTag,isArray$4=isArray_1,isBuffer$2=isBuffer$4.exports,isTypedArray$1=isTypedArray_1,COMPARE_PARTIAL_FLAG=1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",objectTag$1="[object Object]",objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function baseIsEqualDeep$1(e,t,a,r,n,o){var s=isArray$4(e),i=isArray$4(t),c=s?arrayTag$1:getTag$4(e),l=i?arrayTag$1:getTag$4(t),u=(c=c==argsTag$1?objectTag$1:c)==objectTag$1,f=(l=l==argsTag$1?objectTag$1:l)==objectTag$1,g=c==l;if(g&&isBuffer$2(e)){if(!isBuffer$2(t))return !1;s=!0,u=!1;}if(g&&!u)return o||(o=new Stack$1),s||isTypedArray$1(e)?equalArrays(e,t,a,r,n,o):equalByTag(e,t,c,a,r,n,o);if(!(a&COMPARE_PARTIAL_FLAG)){var p=u&&hasOwnProperty$4.call(e,"__wrapped__"),d=f&&hasOwnProperty$4.call(t,"__wrapped__");if(p||d){var _=p?e.value():e,b=d?t.value():t;return o||(o=new Stack$1),n(_,b,a,r,o)}}return !!g&&(o||(o=new Stack$1),equalObjects(e,t,a,r,n,o))}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$4=isObjectLike_1;function baseIsEqual$1(e,t,a,r,n){return e===t||(null==e||null==t||!isObjectLike$4(e)&&!isObjectLike$4(t)?e!=e&&t!=t:baseIsEqualDeep(e,t,a,r,baseIsEqual$1,n))}var _baseIsEqual=baseIsEqual$1,baseIsEqual=_baseIsEqual;function isEqual(e,t){return baseIsEqual(e,t)}var isEqual_1=isEqual;function arrayEach$1(e,t){for(var a=-1,r=null==e?0:e.length;++a<r&&!1!==t(e[a],a,e););return e}var _arrayEach=arrayEach$1,getNative=_getNative,defineProperty$1=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty=defineProperty$1,defineProperty=_defineProperty;function baseAssignValue$2(e,t,a){"__proto__"==t&&defineProperty?defineProperty(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a;}var _baseAssignValue=baseAssignValue$2,baseAssignValue$1=_baseAssignValue,eq=eq_1,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function assignValue$2(e,t,a){var r=e[t];hasOwnProperty$3.call(e,t)&&eq(r,a)&&(void 0!==a||t in e)||baseAssignValue$1(e,t,a);}var _assignValue=assignValue$2,assignValue$1=_assignValue,baseAssignValue=_baseAssignValue;function copyObject$4(e,t,a,r){var n=!a;a||(a={});for(var o=-1,s=t.length;++o<s;){var i=t[o],c=r?r(a[i],e[i],i,a,e):void 0;void 0===c&&(c=e[i]),n?baseAssignValue(a,i,c):assignValue$1(a,i,c);}return a}var _copyObject=copyObject$4,copyObject$3=_copyObject,keys$1=keys_1;function baseAssign$1(e,t){return e&&copyObject$3(t,keys$1(t),e)}var _baseAssign=baseAssign$1;function nativeKeysIn$1(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}var _nativeKeysIn=nativeKeysIn$1,isObject$4=isObject_1,isPrototype$2=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeysIn$1(e){if(!isObject$4(e))return nativeKeysIn(e);var t=isPrototype$2(e),a=[];for(var r in e)("constructor"!=r||!t&&hasOwnProperty$2.call(e,r))&&a.push(r);return a}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike$1=isArrayLike_1;function keysIn$3(e){return isArrayLike$1(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var keysIn_1=keysIn$3,copyObject$2=_copyObject,keysIn$2=keysIn_1;function baseAssignIn$1(e,t){return e&&copyObject$2(t,keysIn$2(t),e)}var _baseAssignIn=baseAssignIn$1,_cloneBuffer={exports:{}};function copyArray$1(e,t){var a=-1,r=e.length;for(t||(t=Array(r));++a<r;)t[a]=e[a];return t}!function(e,t){var a=_root,r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?a.Buffer:void 0,s=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var a=e.length,r=s?s(a):new e.constructor(a);return e.copy(r),r};}(_cloneBuffer,_cloneBuffer.exports);var _copyArray=copyArray$1,copyObject$1=_copyObject,getSymbols$1=_getSymbols;function copySymbols$1(e,t){return copyObject$1(e,getSymbols$1(e),t)}var _copySymbols=copySymbols$1,overArg=_overArg,getPrototype$2=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$2,arrayPush=_arrayPush,getPrototype$1=_getPrototype,getSymbols=_getSymbols,stubArray=stubArray_1,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn$2=nativeGetSymbols?function(e){for(var t=[];e;)arrayPush(t,getSymbols(e)),e=getPrototype$1(e);return t}:stubArray,_getSymbolsIn=getSymbolsIn$2,copyObject=_copyObject,getSymbolsIn$1=_getSymbolsIn;function copySymbolsIn$1(e,t){return copyObject(e,getSymbolsIn$1(e),t)}var _copySymbolsIn=copySymbolsIn$1,baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$1=keysIn_1;function getAllKeysIn$1(e){return baseGetAllKeys(e,keysIn$1,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function initCloneArray$1(e){var t=e.length,a=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$1.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var _initCloneArray=initCloneArray$1,Uint8Array=_Uint8Array;function cloneArrayBuffer$3(e){var t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}var _cloneArrayBuffer=cloneArrayBuffer$3,cloneArrayBuffer$2=_cloneArrayBuffer;function cloneDataView$1(e,t){var a=t?cloneArrayBuffer$2(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var _cloneDataView=cloneDataView$1,reFlags=/\w*$/;function cloneRegExp$1(e){var t=new e.constructor(e.source,reFlags.exec(e));return t.lastIndex=e.lastIndex,t}var _cloneRegExp=cloneRegExp$1,Symbol$2=_Symbol,symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol$1(e){return symbolValueOf?Object(symbolValueOf.call(e)):{}}var _cloneSymbol=cloneSymbol$1,cloneArrayBuffer$1=_cloneArrayBuffer;function cloneTypedArray$1(e,t){var a=t?cloneArrayBuffer$1(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var _cloneTypedArray=cloneTypedArray$1,cloneArrayBuffer=_cloneArrayBuffer,cloneDataView=_cloneDataView,cloneRegExp=_cloneRegExp,cloneSymbol=_cloneSymbol,cloneTypedArray=_cloneTypedArray,boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$3="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag$1(e,t,a){var r=e.constructor;switch(t){case arrayBufferTag$1:return cloneArrayBuffer(e);case boolTag$1:case dateTag$1:return new r(+e);case dataViewTag$1:return cloneDataView(e,a);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(e,a);case mapTag$3:return new r;case numberTag$1:case stringTag$2:return new r(e);case regexpTag$1:return cloneRegExp(e);case setTag$3:return new r;case symbolTag$2:return cloneSymbol(e)}}var _initCloneByTag=initCloneByTag$1,isObject$3=isObject_1,objectCreate=Object.create,baseCreate$1=function(){function e(){}return function(t){if(!isObject$3(t))return {};if(objectCreate)return objectCreate(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}(),_baseCreate=baseCreate$1,baseCreate=_baseCreate,getPrototype=_getPrototype,isPrototype$1=_isPrototype;function initCloneObject$1(e){return "function"!=typeof e.constructor||isPrototype$1(e)?{}:baseCreate(getPrototype(e))}var _initCloneObject=initCloneObject$1,getTag$3=_getTag,isObjectLike$3=isObjectLike_1,mapTag$2="[object Map]";function baseIsMap$1(e){return isObjectLike$3(e)&&getTag$3(e)==mapTag$2}var _baseIsMap=baseIsMap$1,baseIsMap=_baseIsMap,baseUnary$1=_baseUnary,nodeUtil$1=_nodeUtil.exports,nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap$1=nodeIsMap?baseUnary$1(nodeIsMap):baseIsMap,isMap_1=isMap$1,getTag$2=_getTag,isObjectLike$2=isObjectLike_1,setTag$2="[object Set]";function baseIsSet$1(e){return isObjectLike$2(e)&&getTag$2(e)==setTag$2}var _baseIsSet=baseIsSet$1,baseIsSet=_baseIsSet,baseUnary=_baseUnary,nodeUtil=_nodeUtil.exports,nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$1=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet_1=isSet$1,Stack=_Stack,arrayEach=_arrayEach,assignValue=_assignValue,baseAssign=_baseAssign,baseAssignIn=_baseAssignIn,cloneBuffer=_cloneBuffer.exports,copyArray=_copyArray,copySymbols=_copySymbols,copySymbolsIn=_copySymbolsIn,getAllKeys=_getAllKeys,getAllKeysIn=_getAllKeysIn,getTag$1=_getTag,initCloneArray=_initCloneArray,initCloneByTag=_initCloneByTag,initCloneObject=_initCloneObject,isArray$3=isArray_1,isBuffer$1=isBuffer$4.exports,isMap=isMap_1,isObject$2=isObject_1,isSet=isSet_1,keys=keys_1,keysIn=keysIn_1,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};function baseClone$2(e,t,a,r,n,o){var s,i=t&CLONE_DEEP_FLAG$1,c=t&CLONE_FLAT_FLAG,l=t&CLONE_SYMBOLS_FLAG$2;if(a&&(s=n?a(e,r,n,o):a(e)),void 0!==s)return s;if(!isObject$2(e))return e;var u=isArray$3(e);if(u){if(s=initCloneArray(e),!i)return copyArray(e,s)}else {var f=getTag$1(e),g=f==funcTag||f==genTag;if(isBuffer$1(e))return cloneBuffer(e,i);if(f==objectTag||f==argsTag||g&&!n){if(s=c||g?{}:initCloneObject(e),!i)return c?copySymbolsIn(e,baseAssignIn(s,e)):copySymbols(e,baseAssign(s,e))}else {if(!cloneableTags[f])return n?e:{};s=initCloneByTag(e,f,i);}}o||(o=new Stack);var p=o.get(e);if(p)return p;o.set(e,s),isSet(e)?e.forEach((function(r){s.add(baseClone$2(r,t,a,r,e,o));})):isMap(e)&&e.forEach((function(r,n){s.set(n,baseClone$2(r,t,a,n,e,o));}));var d=u?void 0:(l?c?getAllKeysIn:getAllKeys:c?keysIn:keys)(e);return arrayEach(d||e,(function(r,n){d&&(r=e[n=r]),assignValue(s,n,baseClone$2(r,t,a,n,e,o));})),s}cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var _baseClone=baseClone$2,baseClone$1=_baseClone,CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(e){return baseClone$1(e,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG$1)}var cloneDeep_1=cloneDeep;let tabInfo={};async function getActiveTab(){return new Promise(((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0,windowType:"normal"},(a=>{chrome.runtime.lastError?t(chrome.runtime.lastError):a&&a.length>0?e(a[0]):e(void 0);}));}))}async function queryTabs(e){return new Promise(((t,a)=>{chrome.tabs.query(e,(e=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t(e||[]);}));}))}async function getTab(e){return new Promise(((t,a)=>{chrome.tabs.get(e,(e=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t(e);}));}))}function lookupTabInfo(e){return tabInfo[e]}async function refreshTabInfo(){const e=await queryTabs({});tabInfo={};for(const t of e)tabInfo[t.id]={groupId:t.groupId,windowId:t.windowId};}function openUrl({url:e,path:t,params:a={}}){if(e&&t)throw new Error("Only one of url or path should be set.");let r;if(r=t?new URL(`https://modheader.com${t}`):new URL(e),Object.keys(a).length>0)for(const[e,t]of Object.entries(a))r.searchParams.set(e,t);chrome.tabs.create({url:r.href},(()=>{window.close();}));}async function setupTabUpdatedListener(){chrome.tabs.onAttached.addListener(refreshTabInfo),chrome.tabs.onUpdated.addListener(refreshTabInfo),await refreshTabInfo();}var baseKeys=_baseKeys,getTag=_getTag,isArguments=isArguments_1,isArray$2=isArray_1,isArrayLike=isArrayLike_1,isBuffer=isBuffer$4.exports,isPrototype=_isPrototype,isTypedArray=isTypedArray_1,mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(e){if(null==e)return !0;if(isArrayLike(e)&&(isArray$2(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer(e)||isTypedArray(e)||isArguments(e)))return !e.length;var t=getTag(e);if(t==mapTag||t==setTag)return !e.size;if(isPrototype(e))return !baseKeys(e).length;for(var a in e)if(hasOwnProperty.call(e,a))return !1;return !0}var isEmpty_1=isEmpty;const FilterType={TABS:"tabs",TAB_GROUPS:"tabGroups",WINDOWS:"windows",URLS:"urls",EXCLUDE_URLS:"excludeUrls",RESOURCE_TYPES:"types"};async function addUrlFilter(e){let t="";const a=await getActiveTab();if(a&&!isEmpty_1(a.url)){const e=new URL(a.url).host;isEmpty_1(e)||"null"===e||(t=`.*://${e}/.*`);}return [...e,{enabled:!0,urlRegex:t,comment:""}]}async function addResourceFilter(e){return [...e,{enabled:!0,comment:"",resourceType:[]}]}async function addTabFilter(e){return [...e,{enabled:!0,comment:"",tabId:(await getActiveTab()).id||""}]}async function addTabGroupFilter(e){return [...e,{enabled:!0,comment:"",groupId:(await getActiveTab()).groupId||""}]}async function addWindowFilter(e){return [...e,{enabled:!0,comment:"",windowId:(await getActiveTab()).windowId||""}]}function removeFilter(e,t){return (e=cloneDeep_1(e)).splice(t,1),e}function optimizeUrlFilters(e){return e?e.filter((e=>e.enabled)).map((e=>({...e,urlRegex:new RegExp(e.urlRegex)}))):[]}function optimizeResourceFilters(e){return e?e.filter((e=>e.enabled)).map((e=>({...e,resourceType:new Set(e.resourceType)}))):[]}function optimizeTabFilters(e){return e?e.filter((e=>e.enabled)):[]}function passFilters({url:e,type:t,tabId:a,profile:r}){let n,o=!1,s=!1,i=!1,c=!1;for(const t of r.urlFilters){void 0===n&&(n=!1);try{if(t.urlRegex.test(e)){n=!0;break}}catch{n=!1;}}for(const t of r.excludeUrlFilters){void 0===n&&(n=!0);try{if(t.urlRegex.test(e)){n=!1;break}}catch{n=!0;}}for(const e of r.resourceFilters)if(e.resourceType.has(t)){o=!0;break}const l=lookupTabInfo(a)||{};return s=0===r.tabFilters.length||r.tabFilters.some((e=>e.tabId===a)),i=0===r.tabGroupFilters.length||r.tabGroupFilters.some((e=>e.groupId===l.groupId)),c=0===r.windowFilters.length||r.windowFilters.some((e=>e.windowId===l.windowId)),(0===r.urlFilters.length&&0===r.excludeUrlFilters.length||n)&&(0===r.resourceFilters.length||o)&&s&&i&&c}function takeRight(e){const t=e.toString();return t.length>0?t[t.length-1]:"0"}function filterEnabledMods(e){let t=[];if(e)for(const a of e)a.enabled&&a.name&&t.push(a);return t}function evaluateValue({value:value,url:url,oldValue:oldValue}){if(value&&value.startsWith("function"))try{const arg=JSON.stringify({url:url,oldValue:oldValue});return (eval(`(${value})(${arg})`)||"").toString()}catch(e){console.error(e);}return value}async function addUrlRedirect(e){let t="",a="";const r=await getActiveTab();if(r&&!isEmpty_1(r.url)){const e=new URL(r.url),{host:n,origin:o}=e;isEmpty_1(n)||"null"===n||(t=`.*://${n}/.*`),isEmpty_1(o)||"null"===o||(a=o);}return [...e,{enabled:!0,name:t,value:a,comment:""}]}function removeUrlRedirect(e,t){return (e=cloneDeep_1(e)).splice(t,1),e}function optimizeUrlRedirects(e){return filterEnabledMods(e).map((e=>({...e,name:new RegExp(e.name)})))}function redirectUrl({urlRedirects:e,url:t}){if(e)for(const a of e){const e=evaluateValue({value:a.value,url:t,oldValue:t});t.includes(e)||(t=t.replace(a.name,e));}return t}const AppendMode={OVERRIDE:void 0,APPEND:"append",COMMA_SEPARATED_APPEND:"comma"};function isUndefined(e){return void 0===e}var isUndefined_1=isUndefined;function noop(){}const identity=e=>e;function assign(e,t){for(const a in t)e[a]=t[a];return e}function is_promise(e){return e&&"object"==typeof e&&"function"==typeof e.then}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run);}function is_function(e){return "function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let src_url_equal_anchor;function src_url_equal(e,t){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=t,e===src_url_equal_anchor.href}function is_empty(e){return 0===Object.keys(e).length}function subscribe(e,...t){if(null==e)return noop;const a=e.subscribe(...t);return a.unsubscribe?()=>a.unsubscribe():a}function get_store_value(e){let t;return subscribe(e,(e=>t=e))(),t}function component_subscribe(e,t,a){e.$$.on_destroy.push(subscribe(t,a));}function create_slot(e,t,a,r){if(e){const n=get_slot_context(e,t,a,r);return e[0](n)}}function get_slot_context(e,t,a,r){return e[1]&&r?assign(a.ctx.slice(),e[1](r(t))):a.ctx}function get_slot_changes(e,t,a,r){if(e[2]&&r){const n=e[2](r(a));if(void 0===t.dirty)return n;if("object"==typeof n){const e=[],a=Math.max(t.dirty.length,n.length);for(let r=0;r<a;r+=1)e[r]=t.dirty[r]|n[r];return e}return t.dirty|n}return t.dirty}function update_slot_base(e,t,a,r,n,o){if(n){const s=get_slot_context(t,a,r,o);e.p(s,n);}}function get_all_dirty_from_scope(e){if(e.ctx.length>32){const t=[],a=e.ctx.length/32;for(let e=0;e<a;e++)t[e]=-1;return t}return -1}function exclude_internal_props(e){const t={};for(const a in e)"$"!==a[0]&&(t[a]=e[a]);return t}function compute_rest_props(e,t){const a={};t=new Set(t);for(const r in e)t.has(r)||"$"===r[0]||(a[r]=e[r]);return a}function compute_slots(e){const t={};for(const a in e)t[a]=!0;return t}function set_store_value(e,t,a){return e.set(a),t}function action_destroyer(e){return e&&is_function(e.destroy)?e.destroy:noop}const is_client="undefined"!=typeof window;let now$2=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?e=>requestAnimationFrame(e):noop;const tasks=new Set;function run_tasks(e){tasks.forEach((t=>{t.c(e)||(tasks.delete(t),t.f());})),0!==tasks.size&&raf(run_tasks);}function loop(e){let t;return 0===tasks.size&&raf(run_tasks),{promise:new Promise((a=>{tasks.add(t={c:e,f:a});})),abort(){tasks.delete(t);}}}function append(e,t){e.appendChild(t);}function append_styles(e,t,a){const r=get_root_for_style(e);if(!r.getElementById(t)){const e=element("style");e.id=t,e.textContent=a,append_stylesheet(r,e);}}function get_root_for_style(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function append_empty_stylesheet(e){const t=element("style");return append_stylesheet(get_root_for_style(e),t),t.sheet}function append_stylesheet(e,t){append(e.head||e,t);}function insert(e,t,a){e.insertBefore(t,a||null);}function detach(e){e.parentNode.removeChild(e);}function destroy_each(e,t){for(let a=0;a<e.length;a+=1)e[a]&&e[a].d(t);}function element(e){return document.createElement(e)}function svg_element(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty(){return text("")}function listen(e,t,a,r){return e.addEventListener(t,a,r),()=>e.removeEventListener(t,a,r)}function prevent_default(e){return function(t){return t.preventDefault(),e.call(this,t)}}function stop_propagation(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function attr(e,t,a){null==a?e.removeAttribute(t):e.getAttribute(t)!==a&&e.setAttribute(t,a);}function set_attributes(e,t){const a=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:a[r]&&a[r].set?e[r]=t[r]:attr(e,r,t[r]);}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.wholeText!==t&&(e.data=t);}function set_input_value(e,t){e.value=null==t?"":t;}function set_style(e,t,a,r){null===a?e.style.removeProperty(t):e.style.setProperty(t,a,r?"important":"");}function toggle_class(e,t,a){e.classList[a?"add":"remove"](t);}function custom_event(e,t,a=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,a,!1,t),r}const managed_styles=new Map;let active=0,current_component;function hash(e){let t=5381,a=e.length;for(;a--;)t=(t<<5)-t^e.charCodeAt(a);return t>>>0}function create_style_information(e,t){const a={stylesheet:append_empty_stylesheet(t),rules:{}};return managed_styles.set(e,a),a}function create_rule(e,t,a,r,n,o,s,i=0){const c=16.666/r;let l="{\n";for(let e=0;e<=1;e+=c){const r=t+(a-t)*o(e);l+=100*e+`%{${s(r,1-r)}}\n`;}const u=l+`100% {${s(a,1-a)}}\n}`,f=`__svelte_${hash(u)}_${i}`,g=get_root_for_style(e),{stylesheet:p,rules:d}=managed_styles.get(g)||create_style_information(g,e);d[f]||(d[f]=!0,p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${f} ${r}ms linear ${n}ms 1 both`,active+=1,f}function delete_rule(e,t){const a=(e.style.animation||"").split(", "),r=a.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),n=a.length-r.length;n&&(e.style.animation=r.join(", "),active-=n,active||clear_rules());}function clear_rules(){raf((()=>{active||(managed_styles.forEach((e=>{const{stylesheet:t}=e;let a=t.cssRules.length;for(;a--;)t.deleteRule(a);e.rules={};})),managed_styles.clear());}));}function set_current_component(e){current_component=e;}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e);}function onDestroy(e){get_current_component().$$.on_destroy.push(e);}function createEventDispatcher(){const e=get_current_component();return (t,a)=>{const r=e.$$.callbacks[t];if(r){const n=custom_event(t,a);r.slice().forEach((t=>{t.call(e,n);}));}}}function setContext(e,t){get_current_component().$$.context.set(e,t);}function getContext(e){return get_current_component().$$.context.get(e)}function bubble(e,t){const a=e.$$.callbacks[t.type];a&&a.slice().forEach((e=>e.call(this,t)));}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush));}function tick(){return schedule_update(),resolved_promise}function add_render_callback(e){render_callbacks.push(e);}function add_flush_callback(e){flush_callbacks.push(e);}const seen_callbacks=new Set;let flushidx=0,promise;function flush(){const e=current_component;do{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$);}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t());}render_callbacks.length=0;}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e);}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback);}}function wait(){return promise||(promise=Promise.resolve(),promise.then((()=>{promise=null;}))),promise}function dispatch(e,t,a){e.dispatchEvent(custom_event(`${t?"intro":"outro"}${a}`));}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros};}function check_outros(){outros.r||run_all(outros.c),outros=outros.p;}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t));}function transition_out(e,t,a,r){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push((()=>{outroing.delete(e),r&&(a&&e.d(1),r());})),e.o(t);}}const null_transition={duration:0};function create_bidirectional_transition(e,t,a,r){let n=t(e,a),o=r?0:1,s=null,i=null,c=null;function l(){c&&delete_rule(e,c);}function u(e,t){const a=e.b-o;return t*=Math.abs(a),{a:o,b:e.b,d:a,duration:t,start:e.start,end:e.start+t,group:e.group}}function f(t){const{delay:a=0,duration:r=300,easing:f=identity,tick:g=noop,css:p}=n||null_transition,d={start:now$2()+a,b:t};t||(d.group=outros,outros.r+=1),s||i?i=d:(p&&(l(),c=create_rule(e,o,t,r,a,f,p)),t&&g(0,1),s=u(d,r),add_render_callback((()=>dispatch(e,t,"start"))),loop((t=>{if(i&&t>i.start&&(s=u(i,r),i=null,dispatch(e,s.b,"start"),p&&(l(),c=create_rule(e,o,s.b,s.duration,0,f,n.css))),s)if(t>=s.end)g(o=s.b,1-o),dispatch(e,s.b,"end"),i||(s.b?l():--s.group.r||run_all(s.group.c)),s=null;else if(t>=s.start){const e=t-s.start;o=s.a+s.d*f(e/s.duration),g(o,1-o);}return !(!s&&!i)})));}return {run(e){is_function(n)?wait().then((()=>{n=n(),f(e);})):f(e);},end(){l(),s=i=null;}}}function handle_promise(e,t){const a=t.token={};function r(e,r,n,o){if(t.token!==a)return;t.resolved=o;let s=t.ctx;void 0!==n&&(s=s.slice(),s[n]=o);const i=e&&(t.current=e)(s);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,a)=>{a!==r&&e&&(group_outros(),transition_out(e,1,1,(()=>{t.blocks[a]===e&&(t.blocks[a]=null);})),check_outros());})):t.block.d(1),i.c(),transition_in(i,1),i.m(t.mount(),t.anchor),c=!0),t.block=i,t.blocks&&(t.blocks[r]=i),c&&flush();}if(is_promise(e)){const a=get_current_component();if(e.then((e=>{set_current_component(a),r(t.then,1,t.value,e),set_current_component(null);}),(e=>{if(set_current_component(a),r(t.catch,2,t.error,e),set_current_component(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}else {if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e;}}function update_await_block_branch(e,t,a){const r=t.slice(),{resolved:n}=e;e.current===e.then&&(r[e.value]=n),e.current===e.catch&&(r[e.error]=n),e.block.p(r,a);}const globals="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function outro_and_destroy_block(e,t){transition_out(e,1,1,(()=>{t.delete(e.key);}));}function update_keyed_each(e,t,a,r,n,o,s,i,c,l,u,f){let g=e.length,p=o.length,d=g;const _={};for(;d--;)_[e[d].key]=d;const b=[],y=new Map,$=new Map;for(d=p;d--;){const e=f(n,o,d),i=a(e);let c=s.get(i);c?r&&c.p(e,t):(c=l(i,e),c.c()),y.set(i,b[d]=c),i in _&&$.set(i,Math.abs(d-_[i]));}const h=new Set,m=new Set;function T(e){transition_in(e,1),e.m(i,u),s.set(e.key,e),u=e.first,p--;}for(;g&&p;){const t=b[p-1],a=e[g-1],r=t.key,n=a.key;t===a?(u=t.first,g--,p--):y.has(n)?!s.has(r)||h.has(r)?T(t):m.has(n)?g--:$.get(r)>$.get(n)?(m.add(r),T(t)):(h.add(n),g--):(c(a,s),g--);}for(;g--;){const t=e[g];y.has(t.key)||c(t,s);}for(;p;)T(b[p-1]);return b}function get_spread_update(e,t){const a={},r={},n={$$scope:1};let o=e.length;for(;o--;){const s=e[o],i=t[o];if(i){for(const e in s)e in i||(r[e]=1);for(const e in i)n[e]||(a[e]=i[e],n[e]=1);e[o]=i;}else for(const e in s)n[e]=1;}for(const e in r)e in a||(a[e]=void 0);return a}function get_spread_object(e){return "object"==typeof e&&null!==e?e:{}}function bind(e,t,a){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=a,a(e.$$.ctx[r]));}function create_component(e){e&&e.c();}function mount_component(e,t,a,r){const{fragment:n,on_mount:o,on_destroy:s,after_update:i}=e.$$;n&&n.m(t,a),r||add_render_callback((()=>{const t=o.map(run).filter(is_function);s?s.push(...t):run_all(t),e.$$.on_mount=[];})),i.forEach(add_render_callback);}function destroy_component(e,t){const a=e.$$;null!==a.fragment&&(run_all(a.on_destroy),a.fragment&&a.fragment.d(t),a.on_destroy=a.fragment=null,a.ctx=[]);}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31;}function init$1(e,t,a,r,n,o,s,i=[-1]){const c=current_component;set_current_component(e);const l=e.$$={fragment:null,ctx:null,props:o,update:noop,not_equal:n,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:blank_object(),dirty:i,skip_bound:!1,root:t.target||c.$$.root};s&&s(l.root);let u=!1;if(l.ctx=a?a(e,t.props||{},((t,a,...r)=>{const o=r.length?r[0]:a;return l.ctx&&n(l.ctx[t],l.ctx[t]=o)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](o),u&&make_dirty(e,t)),a})):[],l.update(),u=!0,run_all(l.before_update),l.fragment=!!r&&r(l.ctx),t.target){if(t.hydrate){const e=children(t.target);l.fragment&&l.fragment.l(e),e.forEach(detach);}else l.fragment&&l.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush();}set_current_component(c);}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop;}$on(e,t){const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(t),()=>{const e=a.indexOf(t);-1!==e&&a.splice(e,1);}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1);}}const subscriber_queue=[];function readable(e,t){return {subscribe:writable(e,t).subscribe}}function writable(e,t=noop){let a;const r=new Set;function n(t){if(safe_not_equal(e,t)&&(e=t,a)){const t=!subscriber_queue.length;for(const t of r)t[1](),subscriber_queue.push(t,e);if(t){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0;}}}return {set:n,update:function(t){n(t(e));},subscribe:function(o,s=noop){const i=[o,s];return r.add(i),1===r.size&&(a=t(n)||noop),o(e),()=>{r.delete(i),0===r.size&&(a(),a=null);}}}}function derived(e,t,a){const r=!Array.isArray(e),n=r?[e]:e,o=t.length<2;return readable(a,(e=>{let a=!1;const s=[];let i=0,c=noop;const l=()=>{if(i)return;c();const a=t(r?s[0]:s,e);o?e(a):c=is_function(a)?a:noop;},u=n.map(((e,t)=>subscribe(e,(e=>{s[t]=e,i&=~(1<<t),a&&l();}),(()=>{i|=1<<t;}))));return a=!0,l(),function(){run_all(u),c();}}))}function arrayMap$1(e,t){for(var a=-1,r=null==e?0:e.length,n=Array(r);++a<r;)n[a]=t(e[a],a,e);return n}var _arrayMap=arrayMap$1,baseGetTag$1=_baseGetTag,isObjectLike$1=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$2(e){return "symbol"==typeof e||isObjectLike$1(e)&&baseGetTag$1(e)==symbolTag}var isSymbol_1=isSymbol$2,MapCache=_MapCache,FUNC_ERROR_TEXT$1="Expected a function";function memoize$1(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT$1);var a=function(){var r=arguments,n=t?t.apply(this,r):r[0],o=a.cache;if(o.has(n))return o.get(n);var s=e.apply(this,r);return a.cache=o.set(n,s)||o,s};return a.cache=new(memoize$1.Cache||MapCache),a}memoize$1.Cache=MapCache;var memoize_1=memoize$1,memoize=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(e){var t=memoize(e,(function(e){return a.size===MAX_MEMOIZE_SIZE&&a.clear(),e})),a=t.cache;return t}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,(function(e,a,r,n){t.push(r?n.replace(reEscapeChar,"$1"):a||e);})),t})),_stringToPath=stringToPath,Symbol$1=_Symbol,arrayMap=_arrayMap,isArray$1=isArray_1,isSymbol$1=isSymbol_1,INFINITY=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray$1(e))return arrayMap(e,baseToString)+"";if(isSymbol$1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return "0"==t&&1/e==-INFINITY?"-0":t}var _baseToString=baseToString,root=_root,now$1=function(){return root.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(e){return e?e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,""):e}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$1=isObject_1,isSymbol=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$1(t)?t+"":t;}if("string"!=typeof e)return 0===e?e:+e;e=baseTrim(e);var a=reIsBinary.test(e);return a||reIsOctal.test(e)?freeParseInt(e.slice(2),a?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber$1,isObject=isObject_1,now=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(e,t,a){var r,n,o,s,i,c,l=0,u=!1,f=!1,g=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);function p(t){var a=r,o=n;return r=n=void 0,l=t,s=e.apply(o,a)}function d(e){return l=e,i=setTimeout(b,t),u?p(e):s}function _(e){var a=e-c;return void 0===c||a>=t||a<0||f&&e-l>=o}function b(){var e=now();if(_(e))return y(e);i=setTimeout(b,function(e){var a=t-(e-c);return f?nativeMin(a,o-(e-l)):a}(e));}function y(e){return i=void 0,g&&r?p(e):(r=n=void 0,s)}function $(){var e=now(),a=_(e);if(r=arguments,n=this,c=e,a){if(void 0===i)return d(c);if(f)return clearTimeout(i),i=setTimeout(b,t),p(c)}return void 0===i&&(i=setTimeout(b,t)),s}return t=toNumber(t)||0,isObject(a)&&(u=!!a.leading,o=(f="maxWait"in a)?nativeMax(toNumber(a.maxWait)||0,t):o,g="trailing"in a?!!a.trailing:g),$.cancel=function(){void 0!==i&&clearTimeout(i),l=0,r=c=n=i=void 0;},$.flush=function(){return void 0===i?s:y(now())},$}var debounce_1=debounce;function createHeader(){return {enabled:!0,name:"",value:"",comment:""}}function addSetCookieHeader(e){return [...e,createHeader()]}function addHeader(e){return [...e,createHeader()]}function removeHeader(e,t){return (e=cloneDeep_1(e)).splice(t,1),e}var baseGetTag=_baseGetTag,isArray=isArray_1,isObjectLike=isObjectLike_1,stringTag="[object String]";function isString(e){return "string"==typeof e||!isArray(e)&&isObjectLike(e)&&baseGetTag(e)==stringTag}var isString_1=isString;function hue2rgb(e,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e}function hslToRgb(e,t,a){let r,n,o;if(0===t)r=n=o=a;else {const s=a<.5?a*(1+t):a+t-a*t,i=2*a-s;r=hue2rgb(i,s,e+1/3),n=hue2rgb(i,s,e),o=hue2rgb(i,s,e-1/3);}return `#${toHex(r)}${toHex(n)}${toHex(o)}`}function lightOrDark(e){if(!e||!isString_1(e))return "dark";const t=(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")))>>16,a=e>>8&255,r=255&e;return Math.sqrt(t*t*.299+a*a*.587+r*r*.114)>127.5?"light":"dark"}function toHex(e){return Math.round(255*e).toString(16).padStart(2,"0")}function generateBackgroundColor(){return hslToRgb(Math.random(),Math.random(),.1+.45*Math.random())}function generateTextColor(){return "#ffffff"}const toastMessage=writable(""),undoable=writable(!1);function showMessage(e,{canUndo:t=!1}={}){toastMessage.set(""),toastMessage.set(e),undoable.set(t);}function hideMessage(){toastMessage.set("");}async function setProfilesAndIndex(e,t){await setLocal({profiles:e,selectedProfile:t});}async function setProfiles(e){await setLocal({profiles:e});}async function setSelectedProfileIndex(e){await setLocal({selectedProfile:e});}async function setPaused(e){e?await setLocal({isPaused:!0}):await removeLocal("isPaused");}const CURRENT_BROWSER="chrome";async function makeRequest(e,t={}){const a=await fetch(`https://modheader.com${e}`,{mode:"cors",credentials:"include",redirect:"manual",...t});if(a.ok)return await a.json();const r=new Error("Failed to make the request");throw r.statusCode=a.status,r}function getUserDetails(){return makeRequest("/api/u/user-details")}function getProfile({profileId:e}){return makeRequest(`/api/profile/${e}`)}function parseProfile({data:e}){return makeRequest("/api/profile/parse",{method:"POST",body:JSON.stringify({data:e})})}function createProfile$1({profile:e}){return makeRequest("/api/u/profile",{method:"POST",body:JSON.stringify({profile:e})})}function updateProfile$1({profileId:e,profile:t,visibility:a,allowedEmails:r}){return makeRequest("/api/u/profile",{method:"PUT",body:JSON.stringify({profileId:e,profile:t,visibility:a,allowedEmails:r})})}const signedInUser=writable(void 0);async function loadSignedInUser(){try{const e=await getUserDetails();await setLocal({signedInUser:e}),signedInUser.set(e);}catch(e){console.log("User not logged in to ModHeader");}}async function signIn(){openUrl({path:"/login",params:{for:CURRENT_BROWSER,extension_id:chrome.runtime.id}});}async function upgrade(){openUrl({path:"/pricing",params:{for:CURRENT_BROWSER,extension_id:chrome.runtime.id}});}function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}derived([signedInUser],(([e])=>e&&"pro"===e.subscription?.plan),!1);var last_1=last;const changes=[],canUndoChange=writable(!1);let ignoringChangeStack=!0;function updateCanUndo(){canUndoChange.set(changes.length>1);}function undoChange(){if(changes.length>0){const e=changes.pop();return updateCanUndo(),e}}function commit(e){ignoringChangeStack=!0;try{const t=e();changes.push(t),updateCanUndo();}finally{ignoringChangeStack=!1;}}function startIgnoringChange(){ignoringChangeStack=!0;}function stopIgnoringChange(){ignoringChangeStack=!1;}function setChangeField(e,t){if(!(ignoringChangeStack||0!==changes.length&&isEqual_1(last_1(changes)[e],t))){const a=cloneDeep_1(t);changes.push({[e]:a}),updateCanUndo();}}const profiles=writable([]),selectedProfileIndex=writable(0),isPaused=writable(!1),isInitialized=writable(!1);function undo(){let e=undoChange();if(!e)return;const t=get_store_value(profiles),a=get_store_value(selectedProfileIndex),r=get_store_value(isPaused);for(;e&&(isUndefined_1(e.profiles)||isEqual_1(e.profiles,t))&&(isUndefined_1(e.selectedProfileIndex)||e.selectedProfileIndex===a)&&(isUndefined_1(e.isPaused)||e.isPaused===r);)e=undoChange();commitData({newProfiles:e.profiles||t,newIndex:e.selectedProfileIndex,newIsPaused:e.isPaused}),hideMessage();}function commitData({newProfiles:e=[],newIndex:t=0,newIsPaused:a}={}){commit((()=>(t=Math.max(0,Math.min(e.length-1,t)),isUndefined_1(a)&&(a=get_store_value(isPaused)),profiles.set(e),selectedProfileIndex.set(t),isPaused.set(a),{profiles:cloneDeep_1(e),selectedProfileIndex:t,isPaused:a})));}async function init(){isInitialized.set(!1);const e=await getLocal(["profiles","selectedProfile","signedInUser","isPaused"]);signedInUser.set(e.signedInUser),loadSignedInUser(),commitData({newProfiles:e.profiles,newIndex:e.selectedProfile,newIsPaused:!!e.isPaused}),isInitialized.set(!0);}profiles.subscribe((e=>{setChangeField("profiles",e);})),selectedProfileIndex.subscribe((e=>{setChangeField("selectedProfileIndex",e);})),isPaused.subscribe((async e=>{setChangeField("isPaused",e),get_store_value(isInitialized)&&await setPaused(e);})),isInitialized.subscribe((e=>{e?stopIgnoringChange():startIgnoringChange();}));var baseClone=_baseClone,CLONE_SYMBOLS_FLAG=4;function clone(e){return baseClone(e,CLONE_SYMBOLS_FLAG)}var clone_1=clone;const PROFILE_VERSION=2,ARRAY_FIELDS=["headers","respHeaders","urlReplacements","cookieHeaders","setCookieHeaders","urlFilters","excludeUrlFilters","resourceFilters","tabFilters","tabGroupFilters","windowFilters"];let latestProfiles=[],latestSelectedProfileIndex=0;profiles.subscribe((e=>{latestProfiles=e,get_store_value(isInitialized)&&debouncedSave();})),selectedProfileIndex.subscribe((e=>{latestSelectedProfileIndex=e,get_store_value(isInitialized)&&debouncedSave();}));const selectedProfile=derived([profiles,selectedProfileIndex],(([e,t])=>e[t]||{}),{}),buttonColor=derived([selectedProfile],(([e])=>"light"===lightOrDark(e.backgroundColor)?"black":"white"),"white"),debouncedSave=debounce_1(save,500,{leading:!0,trailing:!0});async function save(){try{const e=chrome.extension.getBackgroundPage();await e.saveToStorage({profiles:latestProfiles,selectedProfile:latestSelectedProfileIndex});}catch(e){await chrome.storage.local.set({profiles:latestProfiles,selectedProfile:latestSelectedProfileIndex});}}function isExistingProfileTitle_(e){for(const t of latestProfiles)if(t.title===e)return !0;return !1}function fixProfiles(e){let t=!1;0===e.length&&(e.push(createProfile()),t=!0);for(let a=0;a<e.length;++a){const r=e[a];r.version||(upgradeFromProfileVersion1({profile:r,index:a}),t=!0);}for(const a of e){void 0===a.hideComment&&(a.hideComment=!0,t=!0),a.backgroundColor||(a.backgroundColor=generateBackgroundColor(),t=!0),a.textColor||(a.textColor=generateTextColor(),t=!0),a.shortTitle||(a.shortTitle=takeRight(a.title),t=!0);for(const e of ARRAY_FIELDS)if(void 0===a[e])a[e]=[],t=!0;else for(const r of a[e])void 0===r.comment&&(r.comment="",t=!0);}return t}function upgradeFromProfileVersion1({profile:e,index:t}){e.version=PROFILE_VERSION,void 0===e.hideComment&&(e.hideComment=!0),e.title||(e.title="Profile "+(t+1)),e.shortTitle||(e.shortTitle=takeRight(t+1)),e.headers&&isArray_1(e.headers)||(e.headers=[createHeader()]),e.respHeaders&&isArray_1(e.respHeaders)||(e.respHeaders=[]),e.cookieHeaders&&isArray_1(e.cookieHeaders)||(e.cookieHeaders=[]),e.setCookieHeaders&&isArray_1(e.setCookieHeaders)||(e.setCookieHeaders=[]),e.urlReplacements&&isArray_1(e.urlReplacements)||(e.urlReplacements=[]);let a=AppendMode.OVERRIDE;"comma"===e.appendMode?a=AppendMode.COMMA_SEPARATED_APPEND:"true"!==e.appendMode&&!0!==e.appendMode||(a=AppendMode.APPEND),delete e.appendMode;const r=[...e.headers,...e.respHeaders];for(const e of r)e.appendMode=a;if(e.sendEmptyHeader)for(const e of r)e.sendEmptyHeader=!0;delete e.sendEmptyHeader,e.urlFilters=[],e.excludeUrlFilters=[],e.resourceFilters=[],e.tabFilters=[],e.tabGroupFilters=[],e.windowFilters=[];for(const t of e.filters||[]){const a=t.type;switch(delete t.type,t.comment||(t.comment=""),a){case FilterType.URLS:delete t.resourceType,e.urlFilters.push(t);break;case FilterType.EXCLUDE_URLS:delete t.resourceType,e.excludeUrlFilters.push(t);break;case FilterType.RESOURCE_TYPES:t.resourceType||(t.resourceType=[]),delete t.urlRegex,e.resourceFilters.push(t);}}delete e.filters,e.backgroundColor||(e.backgroundColor=generateBackgroundColor()),e.textColor||(e.textColor=generateTextColor());}function createProfile(){let e=1;for(;isExistingProfileTitle_("Profile "+e);)++e;return {version:PROFILE_VERSION,title:"Profile "+e,hideComment:!0,headers:[createHeader()],respHeaders:[],urlReplacements:[],cookieHeaders:[],setCookieHeaders:[],urlFilters:[],excludeUrlFilters:[],resourceFilters:[],tabFilters:[],tabGroupFilters:[],windowFilters:[],backgroundColor:generateBackgroundColor(),textColor:generateTextColor(),shortTitle:takeRight(e)}}function updateProfile(e){const t=latestSelectedProfileIndex,a=latestProfiles[t];let r=!1;for(const[t,n]of Object.entries(e))if(!isEqual_1(a[t],n)){r=!0;break}if(r){const r=clone_1(a);for(const[t,a]of Object.entries(e))r[t]=cloneDeep_1(a);latestProfiles[t]=r,commitData({newProfiles:latestProfiles,newIndex:t});}}function addProfile(){const e=createProfile();latestProfiles.push(e),commitData({newProfiles:latestProfiles,newIndex:latestProfiles.length-1});}function removeProfile(e){latestProfiles.splice(e,1),0===latestProfiles.length&&(latestProfiles=[createProfile()]),commitData({newProfiles:latestProfiles,newIndex:latestProfiles.length-1}),showMessage("Profile deleted",{canUndo:!0});}function cloneProfile(e){const t=cloneDeep_1(e);t.title="Copy of "+t.title,latestProfiles.push(t),commitData({newProfiles:latestProfiles,newIndex:latestProfiles.length-1}),showMessage("Profile cloned",{canUndo:!0});}function exportProfile(e,{keepStyles:t}={}){const a=cloneDeep_1(e);delete a.profileId,a.hideComment&&delete a.hideComment,t||(delete a.backgroundColor,delete a.textColor);for(const e of ARRAY_FIELDS){if(a[e]&&0!==a[e].length)for(const t of a[e])t.comment||delete t.comment;else delete a[e];const t=`${e}Autocomplete`;a[t]&&0===a[t].autocompleteName.length&&0===a[t].autocompleteValue.length&&delete a[t];}return a}function importProfiles(e){fixProfiles(e);const t=latestProfiles.concat(e);commitData({newProfiles:t,newIndex:t.length-1}),showMessage(`Imported profiles: ${e.map((e=>e.title)).join(", ")}`,{canUndo:!0});}function restoreToProfiles(e){fixProfiles(e),commitData({newProfiles:e,newIndex:0}),showMessage("Profiles restored",{canUndo:!0});}function selectProfile(e){selectedProfileIndex.set(e);}

export { element as $, AppendMode as A, _baseToString as B, isArray_1 as C, _stringToPath as D, create_component as E, empty as F, mount_component as G, insert as H, get_spread_update as I, get_spread_object as J, transition_out as K, check_outros as L, transition_in as M, detach as N, destroy_component as O, PROFILE_VERSION as P, compute_rest_props as Q, getContext as R, SvelteComponent as S, get_current_component as T, setContext as U, onDestroy as V, assign as W, exclude_internal_props as X, binding_callbacks as Y, create_slot as Z, _Symbol as _, setLocal as a, _getPrototype as a$, set_attributes as a0, action_destroyer as a1, update_slot_base as a2, get_slot_changes as a3, get_all_dirty_from_scope as a4, is_function as a5, run_all as a6, isArrayLike_1 as a7, isObjectLike_1 as a8, last_1 as a9, undoable as aA, _defineProperty as aB, noop as aC, space as aD, FilterType as aE, attr as aF, append as aG, toggle_class as aH, canUndoChange as aI, buttonColor as aJ, bind as aK, add_render_callback as aL, create_bidirectional_transition as aM, add_flush_callback as aN, profiles as aO, selectProfile as aP, updateProfile as aQ, showMessage as aR, addProfile as aS, cloneProfile as aT, removeProfile as aU, text as aV, set_data as aW, destroy_each as aX, debounce_1 as aY, removeFilter as aZ, _baseGetTag as a_, _arrayMap as aa, _copyObject as ab, _getAllKeysIn as ac, prevent_default as ad, stop_propagation as ae, listen as af, group_outros as ag, _arrayPush as ah, _baseClone as ai, isSymbol_1 as aj, bubble as ak, _SetCache as al, _baseUnary as am, append_styles as an, handle_promise as ao, init as ap, update_await_block_branch as aq, component_subscribe as ar, save as as, toastMessage as at, onMount as au, undo as av, _cacheHas as aw, isArguments_1 as ax, selectedProfile as ay, isPaused as az, setupTabUpdatedListener as b, getProfile as b0, exportProfile as b1, openUrl as b2, signIn as b3, upgrade as b4, writable as b5, addTabFilter as b6, addTabGroupFilter as b7, addWindowFilter as b8, addUrlFilter as b9, compute_slots as bA, isObject_1 as bB, _isIndex as bC, isLength_1 as bD, _baseIsEqual as bE, _Stack as bF, update_keyed_each as bG, src_url_equal as bH, outro_and_destroy_block as bI, addResourceFilter as ba, clone_1 as bb, addHeader as bc, get_store_value as bd, removeHeader as be, addSetCookieHeader as bf, addUrlRedirect as bg, removeUrlRedirect as bh, createProfile$1 as bi, updateProfile$1 as bj, parseProfile as bk, importProfiles as bl, restoreToProfiles as bm, svg_element as bn, identity as bo, set_style as bp, set_input_value as bq, createEventDispatcher as br, globals as bs, readable as bt, tick as bu, keys_1 as bv, set_store_value as bw, getTab as bx, queryTabs as by, getActiveTab as bz, getSync as c, isUndefined_1 as d, addStorageChangeListener as e, fixProfiles as f, getLocal as g, cloneDeep_1 as h, isEmpty_1 as i, filterEnabledMods as j, optimizeUrlFilters as k, optimizeResourceFilters as l, optimizeTabFilters as m, setSelectedProfileIndex as n, optimizeUrlRedirects as o, setProfilesAndIndex as p, isEqual_1 as q, setProfiles as r, setPaused as s, removeSync as t, setSync as u, passFilters as v, redirectUrl as w, evaluateValue as x, init$1 as y, safe_not_equal as z };
